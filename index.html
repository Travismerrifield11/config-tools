<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IR8340 Config Tool</title>
	<link rel="stylesheet" href="../static/style.css">	
    
</head>

<body>

<div class="app-layout">

    <!-- ================= LEFT ================= -->
    <div class="left-pane">

        <!-- -------- Core Section -------- -->
        <div class="section">
            <h2>Core Network</h2>

            <div class="core-grid">

                <!-- LEFT COLUMN -->
                <div>
                    <div class="field">
                        <label for="hostname">Hostname</label>
                        <input id="hostname" type="text">
                    </div>

                    <div class="field">
                        <label for="loopback0">Loopback0 IP</label>
                        <input id="loopback0" type="text">
                    </div>

                    <div class="field">
                        <label for="loopback1">Loopback1 IP</label>
                        <input id="loopback1" type="text">
                    </div>

                    <div class="field">
                        <label for="hub_slice">Hub Slice</label>
                        <select id="hub_slice">
                            <option value="" disabled selected>Select hub slice</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
                </div>

                <!-- RIGHT COLUMN -->
                <div>
                    <div class="field">
                        <label for="city">City</label>
                        <input id="city" type="text">
                    </div>

                    <div class="field">
                        <label for="state">State</label>
                        <select id="state">
                            <option value="" disabled selected>Select state</option>
                            <option value="IA">IA</option>
                            <option value="WI">WI</option>
                            <option value="IL">IL</option>
                            <option value="MN">MN</option>
                        </select>
                    </div>

                    <div class="field">
                        <label for="location_type">Location Type</label>
                        <select id="location_type">
                            <option value="" disabled selected>Select location</option>
                            <option value="Tower">Tower</option>
                            <option value="Substation">Substation</option>
                            <option value="Ops">Ops</option>
                            <option value="Gen">Gen</option>
                            <option value="Gas">Gas</option>
                        </select>
                    </div>
                </div>

            </div>
        </div>


<!-- ================= WAN SECTION ================= -->
	<div class="section">
    <h2>WAN Configuration</h2>

    <div class="core-grid">

        <!-- ===== WAN PORT 0/1/0 ===== -->
        <div>
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
                <input type="checkbox" id="wan0-enabled">
                <label for="wan0-enabled" style="margin:0; font-weight:600;">
                    GigabitEthernet0/1/0
                </label>
            </div>

            <div class="field">
                <label>Provider</label>
                <select>
                    <option value="" disabled selected>Select provider</option>
                    <option>Aureon</option>
                    <option>CenturyLink</option>
                    <option>Charter</option>
                    <option>North</option>
                    <option>East</option>
                    <option>South</option>
                    <option>West</option>
                    <option>Central</option>
                    <option>Local</option>
                </select>
            </div>

            <div class="field">
                <label>Description</label>
                <input type="text">
            </div>

            <div class="field">
                <label>WAN Type</label>
                <select>
                    <option value="" disabled selected>Select type</option>
                    <option>Fiber</option>
                    <option>Copper</option>
                    <option>Cellular</option>
                </select>
            </div>

            <div class="field">
                <label>Bandwidth (Mbps)</label>
                <input type="number">
            </div>

            <div class="field">
                <label>Shutdown</label>
                <select>
                    <option value="no shut">No Shut</option>
                    <option value="shut">Shutdown</option>
                </select>
            </div>
        </div>

        <!-- ===== WAN PORT 0/1/1 ===== -->
        <div>
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
                <input type="checkbox" id="wan1-enabled">
                <label for="wan1-enabled" style="margin:0; font-weight:600;">
                    GigabitEthernet0/1/1
                </label>
            </div>

            <div class="field">
                <label>Provider</label>
                <select>
                    <option value="" disabled selected>Select provider</option>
                    <option>Aureon</option>
                    <option>CenturyLink</option>
                    <option>Charter</option>
                    <option>North</option>
                    <option>East</option>
                    <option>South</option>
                    <option>West</option>
                    <option>Central</option>
                    <option>Local</option>
                </select>
            </div>

            <div class="field">
                <label>Description</label>
                <input type="text">
            </div>

            <div class="field">
                <label>WAN Type</label>
                <select>
                    <option value="" disabled selected>Select type</option>
                    <option>Fiber</option>
                    <option>Copper</option>
                </select>
            </div>

            <div class="field">
                <label>Bandwidth (Kbps)</label>
                <input type="number">
            </div>

            <div class="field">
                <label>Shutdown</label>
                <select>
                    <option value="no shut">No Shut</option>
                    <option value="shut">Shutdown</option>
                </select>
            </div>
        </div>

<!-- ================= VRF SECTION ================= -->
		<div class="vrf-section">
		<h3>VRFs</h3>
		<table id="vrfTable">
		<thead>
			<tr>
			<th>VRF</th>
			<th>Default Gateway</th>
			<th>Subnet Mask</th>
			<th></th>
			</tr>
		</thead>
		<tbody></tbody>
		</table>

		<button id="addVrf">Add VRF</button>
		</div>
	</div>
	
    <!-- ================= RIGHT ================= -->
    <div class="right-pane">
        <div class="config-header">
            Generated Configuration
        </div>

        <textarea class="config-output" id="config-output" spellcheck="false">
! Configuration preview will appear here
        </textarea>
    </div>

</div>

<script>
const allVrfs = [
  "2WR","AMI","FWBB","GAS","IPCAM","MGMT","PEER","PHYSEC","SUB"
];

const vrfMasks = {
  "2WR": "255.255.255.240",
  "AMI": "255.255.255.240",
  "FWBB": "255.255.255.240",
  "GAS": "255.255.255.248",
  "IPCAM": "255.255.255.240",
  "MGMT": "255.255.255.240",
  "PEER": "255.255.255.248",
  "PHYSEC": "255.255.255.248"
};

const tableBody = document.querySelector("#vrfTable tbody");
const addBtn = document.getElementById("addVrf");

function updateDropdowns() {
  const selected = [...document.querySelectorAll(".vrf-select")]
    .map(s => s.value)
    .filter(v => v);

  document.querySelectorAll(".vrf-select").forEach(sel => {
    const current = sel.value;
    sel.innerHTML =
      `<option value="">Select...</option>` +
      allVrfs
        .filter(v => v === current || !selected.includes(v))
        .map(v => `<option value="${v}">${v}</option>`)
        .join("");
    sel.value = current;
  });
}

function handleVrfChange(select, maskCell) {
  const vrf = select.value;
  maskCell.innerHTML = "";

  if (!vrf) return;

  if (vrf === "SUB") {
    maskCell.innerHTML = `
      <select class="subnet-mask">
        <option value="255.255.255.248">255.255.255.248</option>
        <option value="255.255.255.240">255.255.255.240</option>
        <option value="255.255.255.192">255.255.255.192</option>
      </select>
    `;
  } else {
    maskCell.innerHTML = `
      <input type="text" value="${vrfMasks[vrf]}" readonly>
    `;
  }

  updateDropdowns();
}

function addRow() {
  const row = document.createElement("tr");

  row.innerHTML = `
    <td>
      <select class="vrf-select">
        <option value="">Select...</option>
        ${allVrfs.map(v => `<option value="${v}">${v}</option>`).join("")}
      </select>
    </td>
    <td>
      <input type="text" placeholder="Default Gateway">
    </td>
    <td class="mask-cell"></td>
    <td>
      <button class="remove">âœ•</button>
    </td>
  `;

  const vrfSelect = row.querySelector(".vrf-select");
  const maskCell = row.querySelector(".mask-cell");
  const removeBtn = row.querySelector(".remove");

  vrfSelect.addEventListener("change", () =>
    handleVrfChange(vrfSelect, maskCell)
  );

  removeBtn.addEventListener("click", () => {
    row.remove();
    updateDropdowns();
  });

  tableBody.appendChild(row);
  updateDropdowns();
}

addBtn.addEventListener("click", addRow);
</script>


</body>
</html>
